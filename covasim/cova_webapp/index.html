<!DOCTYPE html>
<html lang="en">


<!-- HEADER -->
<head>

    <!-- Bootstrap boilerplate -->
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8"/>
    <link type="text/css" rel="stylesheet" href="https://unpkg.com/bootstrap/dist/css/bootstrap.min.css"/>
    <link type="text/css" rel="stylesheet" href="https://unpkg.com/bootstrap-vue@latest/dist/bootstrap-vue.css"/>
    <script src="https://polyfill.io/v3/polyfill.min.js?features=es2015%2CIntersectionObserver"></script>
    <script src="https://unpkg.com/vue@latest/dist/vue.js"></script>
    <script src="https://unpkg.com/bootstrap-vue@latest/dist/bootstrap-vue.js"></script>
    <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">
    <!-- Avenir is not available -->

    <!-- Customization -->
    <title>COVASim</title>
    <link rel="icon" href="data:;base64,iVBORw0KGgo="> <!-- Remove favicon.ico 404 -->
    <script src="assets/d3.v5.min.js"></script> <!-- Was http://thekerrlab.com/tmp/d3.v5.min.js -->
    <script src="assets/mpld3.v0.4.1.min.js"></script> <!-- Was http://thekerrlab.com/tmp/mpld3.v0.4.1.min.js -->
    <script src="assets/sciris-js.js"></script> <!-- Was https://unpkg.com/sciris-js/dist/sciris-js.js -->
    <script src="assets/plotly-latest.min.js"></script> <!-- https://d3js.org/d3.v5.min.js -->

    <!-- Define styles -->
    <link rel="stylesheet" href="assets/app.css" type="text/css">
</head>


<!-- BODY -->
<body>
<section id="app" class="container-fluid">
    <header class="row no-gutter">
        <nav class="navbar navbar-dark bg-dark">
            <a class="navbar-brand" href="#">COVASim</a>
            <span class="navbar-text">Coronavirus (COVID-19) agent-based model</span>
            <span class="navbar-text">Version {{ version }}</span>
        </nav>
    </header>

    <div class="content row">

        <div id="parameters" class="col">

            <div class="row">

                <fieldset class="col-md-6">
                    <legend>Simulation Parameters</legend>
                    <div v-for="par in sim_pars" class="form-group">
                        <label>{{par.name}}:</label>
                        <input :disabled="running" class="form-control" v-model="par.best">
                    </div>
                </fieldset>
                <fieldset class="col-md-6">
                    <legend>Epidemiological Parameters</legend>
                    <div v-for="par in epi_pars" class="form-group">
                        <label>{{par.name}}:</label>
                        <input :disabled="running" class="form-control" v-model="par.best">
                    </div>
                </fieldset>

            </div>

            <!-- Run button -->
            <div class="btn-group btn-group-lg">
                <button v-if="running" class="btn btn-primary green" type="button" disabled>
                    <span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span>
                    Running...
                </button>
                <button v-else class="btn btn-primary green" type="button" @click="runSim">
                    Run
                </button>&nbsp;&nbsp;&nbsp;&nbsp;
                <button :disabled="running" class="btn btn-primary blueish" type="button" @click="resetpars">
                    Reset
                </button>&nbsp;&nbsp;&nbsp;&nbsp;

                <select :disabled="running" v-model="reset_choice" @change="resetpars(reset_choice)">
                    <option v-for="(item, index) in reset_options" :value="item">
                        {{ item }}
                    </option>
                </select>

                <!-- <div class="row history"> -->
                <fieldset class="col-12">
                    <!-- <legend>History</legend> -->
                    History: 
                    <select :disabled="running" v-model="historyIdx" @change="loadPars" class="form-control form-control-sm">
                        <option v-for="(item, index) in history" :value="index">
                            {{ index }}
                        </option>
                    </select>
                </fieldset>
            <!-- </div> -->

            </div>

            <div v-if="err" class="errorbox">
                <p>We are extremely sorry, but you have encountered an error:</p>
                <p>{{ err }}</p>
                Please try to fix the problem and rerun.
            </div>


        </div>

        <!-- Show the actual graph -->
        <div id="graphs" class="graphs col">
            <fieldset>
                <legend>Output</legend>
                <plotly-chart v-for="x in graphs" :graph="x" :key="x.id"/>
                <p v-if="graphs.length === 0"><i>Click "Run" to display graphs</i></p>
            </fieldset>
        </div>
    </div>

    <footer class="row no-gutter">
        <nav class="navbar navbar-dark bg-dark">
            <span class="navbar-text">
              &copy; 2020 <a href="http://idmod.org">Institute for Disease Modeling</a>
            </span>
            <a href="https://github.com/amath-idm/covasim" class="navbar-text">
                <svg height="16" viewBox="0 0 16 16" version="1.1" width="20" aria-hidden="true">
                    <path fill-rule="evenodd" fill="currentColor"
                          d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z"></path>
                </svg>
            </a>

        </nav>
    </footer>
</section>
</body>


<!-- SCRIPTS -->
<script src="assets/app.js" type="text/javascript"></script>

</html>
